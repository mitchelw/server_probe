<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Server Probe</title>
    <link rel="stylesheet" href="stylesheet.css">
</head>
<body>
    <header>
        <h1 style="text-align: center">Server Probe</h1>
    </header>

    <main style="position: absolute; text-align: center; top: 45%; width: 99%">
        <div id="form_container">
            <form action="/cgi-bin/index.cgi" method="get" id="addr_form">
                <div style="margin-bottom: 20px">Paste the domain or IP address of a server you want to probe</div>
                <input id="addr" name="addr" type="text" onkeyup="addr_keyup()"/>
                <input type="submit" id="addr_submit" disabled/>
            </form>
        </div>
    </main>

    <footer>
        <div style="display: flex; justify-content: space-around">
            <div>By Mitchel Walker</div>
            <div>————————</div>
            <div>
                <a href="https://github.com/mitchelw/server_probe" target="_blank" rel="noopener noreferrer" style="display: flex; text-align:center;">
                    <img src="https://github.githubassets.com/images/modules/site/icons/footer/github-mark.svg"
                         style="margin-right: 10px;"
                    />Source
                </a>
            </div>
            <div>————————</div>
            <div>© 2023</div>
        </div>
    </footer>

    <script>

        document.addEventListener("DOMContentLoaded", function(event) {
            document.getElementById("addr_form").addEventListener("submit", function(event) {
                document.getElementById("addr_form").style.display = "none";
                const loading = document.createElement("div");
                loading.innerHTML = "Loading"
                let dots = window.setInterval( function() {
                    if ( loading.innerHTML.length - "Loading".length >= 3 )
                        loading.innerHTML = "Loading";
                    else
                        loading.innerHTML += ".";
                }, 500);
                document.getElementById("form_container").append(loading);
                document.getElementById("form_container").append(document.createElement("br"));
                document.getElementById("form_container").append(document.createElement("br"));
                const message = document.createElement("div");
                message.innerHTML = "This usually takes anywhere from 5 to 15 seconds."
                document.getElementById("form_container").append(message);
            });
        });

        function addr_keyup() {
            document.getElementById("addr_submit").disabled = document.getElementById("addr").value === "";
            console.log("Disabled = " + document.getElementById("addr").value === "")
        }

    </script>

</body>
</html>